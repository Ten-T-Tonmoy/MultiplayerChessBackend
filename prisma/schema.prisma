// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

//3 steps ... change schema >>>  then
//npx prisma migrate dev --name init
//use PrismaClient as prsima
//prisma.user.findMany() /seller.findOne()
// npx prisma studio => loadl Ui to browse DB

//demo DATABASE_URL="postgresql://postgres:<password here>@localhost:5432/<Database Name here>?schema=public"

//relations one2many and many2one same shit its  BookList        BookList? @relation(fields: [bookListId], references: [id])
// many to many just add likedBy         User[]    @relation("likedBooks") on both table
generator client {
  provider = "prisma-client-js" //remove shitty 2nd line of this and import from @prisma/client
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//@@unique([filed1,filed2]) composite unique
//@@index composite index  add things u wanna search by

/**
 * ---------------------------------Definitive Schema and relations-------------------------------------------------------------
 * enum BookType {
 * poetry
 * drama
 * fiction
 * }
 * model Book {
 * id              String    @id @default(cuid())
 * bookType        BookType //poetry drama academic bla bla shit
 * publishDate     DateTime?
 * availableStores String[]
 * //Review[]  reviews         String[]
 * ratingSum       Int       @default(0)
 * likedBy         User[]    @relation("likedBooks")
 * createdAt       DateTime  @default(now())
 * review          Review[]
 * BookList        BookList? @relation(fields: [bookListId], references: [id])
 * bookListId      String?
 * @@index([genre])
 * @@index([keywords])
 * }
 */

enum AvatarType {
  teenboy
  casualMan
  suitedMan
  ladyHat
  suitedLady
  gownLady
  mysterious
  schoolBoy
  schoolGirl
}

model User {
  id         String      @id @default(cuid())
  name       String
  username   String
  password   String
  avatar     AvatarType?
  about      String?
  isOnline   Boolean     @default(false)
  lastActive DateTime    @default(now())
  createdAt  DateTime    @default(now()) // always createdAt to track self reminder

  email        String?
  country      String?
  gender       Boolean //definately binary
  profilePhoto String?
  coverPhoto   String?

  blitzRating     Int @default(1000)
  rapidRating     Int @default(1000)
  classicalRating Int @default(1000)
  bulletRating    Int @default(1000) //might avoid this

  //history
  totalGames    Int @default(0)
  wins          Int @default(0)
  loses         Int @default(0)
  draws         Int @default(0)
  currentStreak Int @default(0)
  bestStreak    Int @default(0)

  //relations
}

model Setting {
  id String @id @default(cuid())

  //prefs
  maxOpponentRating           Int     @default(2000)
  minOpponentRating           Int     @default(500)
  onlineStatusPubliclyVisible Boolean @default(true)
  allowSpectators             Boolean @default(true)
  acceptPublicFriendRequests  Boolean @default(true)

  //ui  gotta make enums for these?
  theme        String  @default("classic")
  boardColor   String  @default("brown")
  pieceColor   String  @default("standard")
  language     String  @default("endglish") //as if i can change
  soundEnabled Boolean @default(true)
  // animationsPlay Boolean @default(true)

  //privacy stuffs
  profilePublic     Boolean @default(true)
  gameHistoryPublic Boolean @default(true)
  statusPublic      Boolean @default(true)

  updatedAt DateTime @updatedAt //just trackin changes

  @@map("settings")
}

model MatchHistory {
  id               String @id @default(cuid())
  totalMatchPlayed Int
  won              Int
  lost             Int
  peakRating       Int
}

//future modular cases
